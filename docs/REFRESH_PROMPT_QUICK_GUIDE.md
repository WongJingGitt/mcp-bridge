# 刷新 System Prompt 功能 - 快速指南

## 🎯 功能简介

手动刷新并注入最新的 MCP 工具列表到输入框，可选择是否自动发送。

---

## 🚀 快速开始

### 方式 1：Popup 弹窗（推荐）

1. 点击浏览器工具栏的 MCP Bridge 图标
2. 在"快速操作"区域：
   - 点击 **"刷新 System Prompt"** 按钮
   - 可选：开启 **"刷新后自动发送"** 开关

### 方式 2：状态面板

- 点击右下角面板头部的 🔄 图标

---

## ⚙️ 配置选项

### 自动发送开关

**关闭（默认）：**
- ✅ 注入 Prompt 到输入框
- ⏸️ 停留等待用户补充问题
- ✍️ 用户手动按回车发送

**开启：**
- ✅ 注入 Prompt 到输入框
- ⏩ 自动按回车发送
- 🚀 快速测试工具列表

---

## 💡 使用场景

| 场景 | 建议设置 | 操作 |
|------|----------|------|
| 新对话前准备 | 自动发送：关 | 刷新 → 补充问题 → 发送 |
| 对话中更新工具 | 自动发送：关 | 刷新 → 添加说明 → 发送 |
| 快速测试连接 | 自动发送：开 | 刷新 → 自动发送 |

---

## 🎨 UI 预览

### Popup 弹窗
```
┌─────────────────────────────────┐
│  🏷️ MCP Bridge                 │
│  为网页大模型提供工具调用能力    │
├─────────────────────────────────┤
│  ✅ 启用 MCP 功能      [开关]   │
│  📊 本地服务状态       已连接    │
├─────────────────────────────────┤
│  ⚡ 快速操作                    │
│  ┌───────────────────────────┐ │
│  │ 🔄 刷新 System Prompt     │ │ ← 主功能
│  ├───────────────────────────┤ │
│  │ 🚀 刷新后自动发送  [开关] │ │ ← 控制选项
│  └───────────────────────────┘ │
│  💡 提示信息                    │
├─────────────────────────────────┤
│  ⚙️ 打开详细设置                │
└─────────────────────────────────┘
```

### 状态面板
```
┌─────────────────────────────┐
│ 🏷️ MCP Bridge  🔄  ▼       │ ← 刷新按钮
├─────────────────────────────┤
│ ✓ System Prompt 已刷新      │
└─────────────────────────────┘
```

---

## 🔧 故障排查

### ❌ 点击无反应
- 检查本地服务是否连接
- 查看控制台错误信息

### ❌ 注入后无法编辑
- 确认网站配置正确（`api_list.json`）
- 手动点击一次输入框

### ❌ 自动发送失败
- 关闭自动发送，改为手动
- 增加 `submitDelay` 延迟时间

---

## 📚 相关文档

- [完整功能文档](./REFRESH_PROMPT_FEATURE.md)
- [响应配置指南](./RESPONSE_CONFIG_GUIDE.md)
- [UI 现代化指南](./UI_MODERNIZATION_GUIDE.md)
